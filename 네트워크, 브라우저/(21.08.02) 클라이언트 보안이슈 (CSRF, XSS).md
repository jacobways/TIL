# 클라이언트 보안이슈

***

## 여러 가지 공격들
- SQL Injection
- XSS : 코드 인젝션 기법
- CSRF (Cross Site Request Forgery)

***

## CSRF  

### 1. CSRF (Cross Site Request Forgery : 사이트 간 요청 위조)
- CSRF : 다른 오리진(cross-site)에서 유저가 보내는 요청(request)를 조작(forgery)하는 것
- 해커가 직접 데이터를 접근할 수 없음 (다른 오리진이기 때문)
- 인증정보(쿠키) 바탕으로 사용자가 어떤 정보를 믿어서 생기는 문제 (ex. 변조된 웹사이트)
- 특정 사이트가 사용자의 브라우저를 신뢰하는 점을 이용해서 공격하는 것

### 2. CSRF 공격을 하기 위한 조건
- 쿠키를 사용한 로그인 : 유저가 로그인 했을 떄 쿠키로 해당 유저를 알 수 있어야 함
- 예측할 수 있는 요청/parameter를 가지고 있어야 함 : request에 해커가 모를 수 있는 정보가 담겨있으면 안됨

### 3. CSRF 예방법
- referrer 검증 (SameSite 쿠키 설정)
  - 서버에서 request의 referrer을 확인하여 도메인이 일치하는지 검증하는 방법
  - Same-site cookie 사용하기 : 같은 도메인에서만 세션/쿠키를 사용할 수 있음

- Security Token (CSRF Token) 사용하기
  - 사용자의 세션에 임의의 난수값을 저장하고 사용자의 매 요청마다 해당 난수 값을 포함시켜 전송 후 서버에서 검증
  - 서버측에서 CSRF 공격을 보호하기 위한 문자열을 유저의 브라우저와 앱에만 제공
  
- Double Submit Cookie 검증
  - Security Token 검증의 한 종류로 세션을 사용할 수 없는 환경에서 사용할 수 있는 방법
  - 스크립트 단에서 요청 시 난수 값을 생성하여 쿠키에 저장하고 동일한 난수 값을 요청 파라미터에도 저장하여 서버로 전송함

***

## XSS의

### 1. XSS (Cross Site Scripting)
- 공격자가 상대방의 브라우저에 Script를 실행할 수 있게 하기
- 이를 통해 사용자의 세션을 가로채거나 웹 사이트 변조, 악의적 컨텐츠 삽입, 피싱 공격을 하는 것

### 2. XSS 예방법
- 중요한 정보를 쿠키에 저장하지 않는 것
- 정규표현식을 사용한 태그 입력 필터 설치
- HTML 포맷의 입력 제한
