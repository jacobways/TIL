# 인증과 보안 - 암호화, Hash와 Salt

***

## 암호화(encryption)
- 일련의 정보를 임의의 방식을 사용해 다른 형태로 변환하기 
- 이를 통해 해당 방식에 대한 정보를 소유한 사람을 제외하고 이해할 수 없도록 '알고리즘'을 이용해 정보를 관리하는 과정

### 1. 비대칭 키 암호화
- 비대칭 키 암호화 방식은 HTTPS 프로토콜에서 주로 사용되며, 중간에 인터넷 요청이 탈취되더라도 복화하 하기 전까지는 그 내용을 알아볼 수 없음
- 다른 키 한 쌍으로 암호화와 복호화 가능 : A키로 암호화 한다면 한 쌍인 B키로 복호화 해야함

- 개인 키(Private Key)와 공개 키(Public Key)
  - 개인 키 : 서버에 비밀로 숨겨두고 공개 키는 클라이언트에 공개 (복호화)

  - 공개 키 : 개인 키로 무결성(Integrity) 확인하며 HTTPS가 적용된 사이트의 무결성을 검증 (암호화)

### 2. 대칭 키 암호화
- 대칭 키 암호화 방식은 주로 TCP에서 사용 
- 대표 예시 Hash : 원래 값을 부수어서(hash) 알아볼수 없게 결과를 변형하는 것

***

## HASH

### 1. Hasing
- Hashing : 어떤 문자열에 '임의의 연산'을 적용하여 다른 문자열로 변환하는 것으로 암호화 과정에서 헤시 함수 사용
- 암호화 알고리즘 사이트 : http://emn178.github.io/online-tools/sha256.html
- 복호화 사이트 : https://crackstation.net/

### 2. Hash 함수 특징
- 헤시 함수로 암호환 된 것은 수학적으로 복호화가 가능하지만 시간적으로는 불가능
- 그러나 rainbow table에 들어있는 내용은 보안이 뚫림 (SHA512, SHA256은 아직 안전)
- 입력값과 상관없이 출력값의 길이는 항상 같음 (출력값 길이가 다르면 입력값을 추측하는 단서가 되서 보안상 좋지 않음)
- 헤시 충돌 : 입력값이 달라도 출력값이 같을 수 있으며, 이러한 중복이 드물수록 좋은 헤시 함수

### 2. Hash의 주의점
- 모든 값에 대해 해시 값을 계산하는데 오래걸리지 않아야 함
- 최대한 해시 값을 피해야 하며, 모든 값을 고유한 해시 값을 가짐
- 아주 작은 단위의 변경이라도 완전히 다른 해시 값을 가져야 함

***

## Salt

### 1. Salt
- Salt : 암호화해야 하는 값에 어떤 별도의 값을 추가하여 결과를 변형하는 것
- 기존 방식 : 암호화 하려는 값 -> hash값
- Salt 사용 : 암호화 하려는 값 + Salt용 값 -> hash 값

### 2. Salt 사용 이유
- 암호화만 해놓는다면 해시된 결과가 늘 동일하여, 해시된 값과 원래 값을 테이블(레인보우 테이블)로 만들어서 decoding 해버리는 경우도 생김
- 원본값에 임의로 약속된 '별도의 문자열'을 추가하여 해시를 진행하기
- 그러면 기존 해시값과 전혀 다른 해시값이 반환되어 알고리즘이 노출되더라도 원본값을 보호할 수 있도록 하는 안전 장치
- 케르크호프스의 원리 때문에 알고리즘이 공개되어도 암호 쳬계는 안전함

### 3. Salt의 주의점
- Salt는 유저와 패스워드 별로 유일한 값을 가져아 함
- 사용자 계정을 생성할 때와 비밀번호를 변경할 때 마다 새로운 임의의 Salt를 사용해서 해싱해야 함
- Salt는 절대 재사용하지 말아야 함
- Salt DB의 유저 테이블에 같이 저장되어야 함 (salt 값을 사용자마다 다르게 줄 수 있음)
