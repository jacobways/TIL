# SSR과 CSR

- 브라우저에 표시될 콘텐츠를 만드는 위치에 따라 CSR과 SSR 분류

***

## SSR (Server Side Rendering)

### 1. SSR이란?
- 웹 페이지를 브라우저에서 렌더링하는 대신에 서버에서 랜더링

- 서버에서 DB의 데이터를 통해 HTML을 만들어서 브라우저에 전송

### 2. 과정
- 브라우저가 서버의 URI로 ```GET``` 요청 보냄

- 서버는 정해진 웹 페이지 파일을 브라우저로 보냄

- 파일이 브라우저에 도착하면 완전히 렌더링

- 즉 서버에서 웹 페이지를 렌더링 한 후에 브라우저로 보냄

### 3. 장점
- CSR(브라우저에서 DOM을 생성하고, 그 DOM을 다시 HTML로 내려줘서 그리는 방식)보다 속도 면에서 훨씬 이점

- 이는 서버가 가진 컴퓨팅 파워(자체 성능)가 브라우저보다 훨씬 우월하기 때문

- 콘텐츠 표시 속도가 CSR보다 빨라 SEO에 유리함

- 보통 web 콘텐츠가 많을 때 많이 쓰이는 렌더링 방식

### 4. 단점
- 매번 데이터를 서버에 요청해야하므로 서버쪽에서 부담이 됨 → 로딩 느려질 수 있음

- 최초에 단 한번만 HTML 파일을 다운로드 받는 CSR보다 렌더링 속도가 느릴 수 있음

### 5. 구현 방법
- Next.js를 사용
  - API로 받아온 데이터를 바탕으로 화면에 HTML을 만들어서 내려주는 방법
  - 이미지나 렌더링 최적화 등의 기능도 수행하기 때문에 훨씬 좋은 서버 사이드 렌더링을 하는 웹 앱 만들 수 있음

- Node.js 에서 템플릿 엔진을 활용하기 : DB에 있는 데이터를 실시간으로 연동해서 템플릿화

- 리액트 Hydrate를 사용하기
  - Server Side 단에서 렌더링 된 정적 페이지와 번들링된 JS파일을 클라이언트에게 보내기 
  - 클라이언트 단에서 HTML 코드와 React인 JS코드를 서로 매칭 시키기

<img width="300" alt="스크린샷 2021-12-12 오전 1 52 58" src="https://user-images.githubusercontent.com/80403988/145684900-a90f49a7-f087-4044-972d-eb94b4eeb1f6.png">

***

## CSR (Client Side Rendering)

### 1. CSR이란?
- 서버측이 아닌 클라이언트(웹 브라우저)에서 페이지 랜더링

- 클라이언트에서 HTML을 DOM을 이용해서 만들어 화면에 그리는 것

- DOM - Render Tree - Layout - Paint- Render의 과정을 거침

### 2. 과정
- 브라우저가 서버로 요청
- 서버는 웹 페이지의 골격이 될 단일 페이지를 클라이언트에게 보냄 (웹페이지 + JavaScript 파일)

- JS 파일은 브라우저에서 웹 페이지를 완전히 렌더링된 페이지로 바꿈

- 즉 기존에 파싱할 HTML을 가장 기초적인 것만 가져가고, 나머지는 JS를 이용해서 DOM을 만들고 HTML에 덧붙임

### 3. 장점
- 최초에 사이트에 접근해 다운 받는 HTML 자체의 용량은 적어지기 때문에, 페이지를 로딩하는 데에 드는 시간이 줄어듬

- 사이트에 풍부한 상호 작용이 있는 경우, 웹 애플리케이션 제작시 빠른 동적 렌더링을 제공해야할 경우에 UX 강점

- 브라우저가 다른 경로로 이동하면 서버가 웹 페이지를 다시 보내지 않고, 브라우저는 브라우저가 요청한 경로에 따라 페이지 다시 렌더링

- 실시간성이 보장되어야 하는 사이트에서 유용 : 노션, SNS 등

### 4. 단점
- 초기 렌더링이 SSR보다 느림

  - 처음에 HTML과 JS 파일을 모두 받아와 브라우저에서 렌더링

  - 브라우저에서 DOM을 생성하고, 그 DOM을 다시 HTML로 내려줘서 그리는 방식

- HTML을 기본적인 것만 가져오고 나머지는 전부 DOM을 이용해 그리기 때문에 JS 파일이 커짐

- JS 번들 사이즈가 커져 브라우저가 가지고 있는 파워를 많이 쓰게 되었고, 결국 렌더링 퍼포먼스는 조금 저하

- SEO(검색최적화) 사용은 불가능함

- 보안 : 쿠키 등에 사용자 정보를 저장해야 해서 위험

### 5. 관련 라이브러리
- React, Angualr, Vue 등

- 브라우저에서 컴포넌트를 만들어, 그 컴포넌트를 브라우저 화면에 그리는 것 (렌더링)을 최우선 목표로 함

- 컴포넌트를 만드는 것은 JavaScript로 DOM을 만드는 것과 같음

<img width="300" alt="스크린샷 2021-12-12 오전 1 53 15" src="https://user-images.githubusercontent.com/80403988/145684914-abbc5484-2227-40c6-8ac5-cc672fd73983.png">
