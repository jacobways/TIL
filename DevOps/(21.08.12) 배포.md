# Amazon Web Service

***

## AWS 서비스의 기본 용어
- AMI(Amazon Machine Image) : 소프트웨어 구성이 기재된 템플릿 (운영체제 + 애플리케이션)

- 리전(Region) : 지역별로 만들어 해당 region에 인스턴스를 묶음 (오하아오, 서울 region)

- 가용 영역 (Availability Zone) : region보다 작은 단위 (한국에는 서울, 부산에 있다고 함)

- 프라이빗 IP 주소 : 내부망에서 인스턴스에 접근할 때 private IP로 접근

- 퍼블릭 IP 주소 : 외부에서 인스턴스로 접근할 때 Public IP로 접근

- 보안 그룹 : 가상 컴퓨터에서 PORT/IP들을 허용하는 방화벽 프로그램
  - 80 : HTTP가 주로 사용하는 포트

  - 3306 : MySQL이 주로 사용하는 포트

  - 443 : HTTPS가 사용하는 포트

  - 22 : 작업을 위해 디폴트 옵션으로 열어둔 SSH를 위한 포트 (현업에서는 이렇게 하지 않고 내부망 사용)

  - EC2와 RDS는 보안 그룹을 설정했고, S3는 보안 그룹 설정 없이 Public 접근 여부만 설정

- 탄력적 IP 주소 (EIP)

***

## AWS 서비스

### 1. EC2
- EC2 (Elastic Computer Cloud)
  - 아마존의 비용, 성능, 용량면에서 탄력적인 가상 컴퓨터를 한대 빌리는 것

  - PC방처럼 사용한 만큼 사용료 지불

- 이미지 : 템플릿 (OS, 애플리케이션)

- 인스턴스 : 아마존에시 대여하는 이미지가 적용되어 만들어진 가상(논리) 컴퓨터
  - 인스턴스 종료 : 인스턴스가 삭제됨

  - 인스턴스 종료 후 재시작 : IP 주소가 바뀜

- 인스턴스 유형 : 하드웨어임. 스펙 정의 

- 키 페어 : 비대칭 키 암호화 (SSH 프로토콜로 접속)

- 인스턴스 스토어 볼륨 : 인스턴스 자체에 내장된 임시 저장공간(HDD/SSD)으로 인스턴스 종료시 사라짐

- Amazon EBS(Elastic Block Store) : 인스턴스에 붙일 수 있는 저장공간(HDD/SSD)으로 인스턴스와 독립적으로 저장 가능

- Virtual Private Clouds(VPC) : 외부와 격리된 내부망으로 이 안에서 인스턴스끼리 통신함

- Elatic Load Balancer : EC2 사용에 필요

- Load Balancer : 여러 개의 컴퓨터에 트래픽 부하(load) 분산하는 시스템


### 2. RDS
- RDS (Relational Database Service) : AWS에서 제공하는 관계형 데이터베이스

- EC2에 MySQL을 설치하는 것이 아니라, MySQL에 접속하는 서비스

- EC2에서 MySQL을 설치하지 않고 RDS를 사용하는 이유는 하나의 컴퓨터에서 하나의 일만 하는 것이 좋기 때문

- 비용 문제로 RDS를 사용하기 싫다면 EC2를 2개 사용하여 서버와 데이터베이스를 분리하는 것도 하나의 대안

### 3. S3
- S3 (Simple Storage Service) : AWS에서 제공하는 클라우드 스토리지 서비스
  - 데이터를 무한히 저장 가능하고, 정적 웹 사이트 호스팅 가능 

  - 정적 파일 : 서버의 개입 없이 생성된 파일 / 동적 파일 : 서버가 요청에 맞추어 그 자리에서 생성한 파일

  - 웹 호스팅 : 서버의 한 공간을 빌려주어 웹 사이트의 배포와 운영이 가능하게 해주는 서비스이며 URL로 접근 가능

  - 버킷을 통한 웹 호스팅 가능

- 버킷 : S3에 저장되는 파일들이 담기는 바구니이며 파일을 저장하는 최상위 디렉토리 (저장 공간을 의미하는 AWS 용어)

- 객체 : 버킷이 담기는 파일 (키-값 페어 형식)로서 S3에 저장되는 객체는 파일과 메타데이터로 구성

- 메타데이터 : 객체의 생성일, 크기, 유형과 같은 객체에 대한 정보가 담긴 데이터

### 4. 기타 서비스
- lightsail, elastic beanstalk : EC2 쉽게 사용할 수 있게 하는 서비스

- lamba : serverless 마이크로서비스

- VPC : 그룹을 만들어 내부 DNS 및 IP로 통신하게 만듬

- CloudFront : CDN (정적 혹은 동적 웹페이지 배포하기 위한 전세계적 캐시서버)

- Cloud Front(CDN) 세팅 통한 HTTPS 사용 : cloudFront가 CDN 연결하며 http를 https로 변경하는 내부 기능 제공

- ACM : 인증서 관리

- Route R3 : 도메인 구입 및 관리, 도메인을 IP로 변경

***

## 배포 전략

### 1. 배포 방법
- 빌드 : 불필요한 데이터를 없애고, 여러 갈래로 퍼져있는 데이터들을 통합 및 압축하여 배포하기에 최적화된 상태를 만드는 것

- 웹 앱은 배포 가능한 정적 파일로 만들어야 함

- 리액트에서 정적 파일 형태로 결과물 만드는 명령어 : ```npm run build```

### 2. 추후 배포 단계 

- 중급 (HTTPS)
  - Route53을 통한 호스팅 영역 생성

  - CloudFront, ACM을 통해 SSL 인증서 발급 및 적용 (클라이언트 쪽)

  - Elastic Load Balancer, ACM을 통한 SSL 인증서 발급 및 적용 (서버 쪽)

  - Route53에 레코드 영역을 생성

- 고급
  - Docker, Jenkins 와 같은 오픈 소스 이용

  - Elastic Beanstalk 와 같은 다른 AWS 서비스 이용

  - 배포 자동화 파이프라인 구축
