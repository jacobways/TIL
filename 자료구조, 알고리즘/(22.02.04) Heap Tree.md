# Heap Tree

## Heap Tree란

### 1. Heap Tree의 정의
- 일반적인 트리구조와는 다르게, heap tree는 우선순위에 따라서 빠르게 자료를 검색할 수 있는 구조

- 예시 : 응급실에서 환자가 들어온 순서와 달리, 조금 더 빠른 치료가 필요한 환자부터 치료를 시작하게 되는 것과 비슷

- 이처럼 우선순위를 정해서 먼저 자료를 찾아내고 처리하기 위해 만들어진 자료구조

### 2. Heap Tree의 구조 (느슨한 정렬 구조)
- 부모 노드가 자식 노드의 값보다 항상 크거나 항상 작게 정렬되어 있지만음

- 하지만 자식 노드끼리의 값의 크기를 비교하여 좌우 위치는 정렬하지 않는다.

### 3. Heap Tree의 특징
- 완전 이진 트리 : 삽입/삭제 시 성능을 위해 완전 이진 트리로 구현하게 됨

- 중복된 값 저장 : 단순히 최댓값/최솟값을 찾아내기 위한 구조이기 때문에 일반적인 이진 탐색 트리와 다르게 중복된 값 저장 가능

- 최대 힙과 최소 힙으로 구현
  - 최대 힙 : 루트 노드에 가장 큰 값이 위치하며, 자식 노드로 내려갈수록 작은 값이 위치하게 구현

  - 최소 힙 : 루트 노드에 가장 작은 값이 위치하며, 자식 노드로 내려갈수록 큰 값이 위치하게 구현

<img width="700" alt="스크린샷 2022-02-04 오후 5 16 35" src="https://user-images.githubusercontent.com/80403988/152495658-5602f29f-fb63-4f8d-8555-29bb3c49df16.png">

***

## Heap Tree 데이터 처리 방식

### 1. 데이터 검색(최대값 / 최소값)
- 최대 힙 : 루트 노드인 최대값을 찾는데 걸리는 시간복잡도는 O(1)

- 최소 힙 : 루트 노드인 최소값을 찾는데 걸리는 시간복잡도는 O(1)

### 2. 데이터 삽입
- 가장 마지막 노드에 새로운 값을 저장합니다.

- 삽입된 노드의 값과 부모 노드의 값을 비교합니다.

- 최대 힙일 경우, 부모의 값이 더 크다면 부모의 값과 위치를 서로 변경합니다.

- 더 이상 위치가 바뀌지 않을 때까지 1~3까지의 과정을 반복합니다.

### 3. 데이터 삭제
- 루트 노드의 값을 제거합니다.

- 루트 자리에 마지막 노드의 값을 삽입합니다.

- 올라간 노드의 값과 그 자식 노드들의 값과 비교합니다.

- 부모보다 더 큰 자식이 있다면(최대 힙) 해당 자식의 값과 서로 교환합니다.

- 만약 두 자식의 값이 모두 부모보다 작다면, 두 값 중 큰 값과 위치를 변경합니다.

- 더 이상 큰 값이 없을 때까지 반복합니다.

### 4. 힙 트리가 사용되는 곳
- 힙 정렬 : https://www.geeksforgeeks.org/heap-sort/

***

## Heap Tree를 배열로 구현하기

<img width="800" alt="스크린샷 2022-02-04 오후 5 19 51" src="https://user-images.githubusercontent.com/80403988/152495680-eb6bd35d-f3c4-4c76-925b-f702345f6935.png">

- heap tree는 완전 이진 트리로 구현되어 배열로 표현할 수 있습니다.

- 완전 이진 트리의 특성상 중간에 빈 값이 없기 때문에, 루트 노드부터 높이 순서대로 배열에 모두 정렬이 가능합니다.

- 구현과 노드의 위치를 찾기 쉽게 하기 위해 일반적으로 배열의 0번째 인덱스는 사용하지 않고, 첫 번째 인덱스부터 사용합니다.

- 위의 그림처럼 높이 순서대로 배열에 값을 저장하며, 좌에서 우로 순서대로 값을 저장하게 됩니다.

- 배열로 heap tree를 구현한다면 배열의 크기에 따라서 heap tree의 depth가 얼마인지, 부모와 자식 노드의 위치까지도 쉽게 검색할 수 있습니다.

- depth(깊이)는 배열의 길이가 1, 3, 7, 15 순서대로 2의 배수를 계속 더해준 만큼 depth(깊이)가 늘어납니다.

- 부모와 자식 노드의 인덱스를 찾는 방법도 수식으로 계산할 수 있습니다 : 

<img width="800" alt="스크린샷 2022-02-04 오후 5 20 05" src="https://user-images.githubusercontent.com/80403988/152495690-a21b9c17-2045-4382-88d3-9e1292ccd21f.png">

- 현재 노드의 왼쪽 자식 노드의 인덱스는 현재 노드의 인덱스 * 2입니다.

- 현재 노드의 오른쪽 자식 노드의 인덱스는 (현재 노드의 인덱스 * 2) + 1입니다.

- 부모의 인덱스는 자식 노드의 인덱스 / 2 (내림)입니다.
